{"ast":null,"code":"import _objectSpread from \"/home/seungmin/face-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withHandlers, withStateHandlers } from 'recompose';\nimport { withRouter } from 'react-router-dom';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport { withNotifications } from 'modules/notification';\nimport { spinnerWhileLoading } from 'utils/components';\nimport { UserIsAuthenticated } from 'utils/router';\nimport { success, error } from 'components/Messages';\nexport default compose( // redirect to /login if user is not logged in\nUserIsAuthenticated, // Map auth uid from state to props\nconnect(function (_ref) {\n  var uid = _ref.firebase.auth.uid;\n  return {\n    uid: uid\n  };\n}), // Wait for uid to exist before going further\nspinnerWhileLoading(['uid']), // Create listeners based on current users UID\nfirebaseConnect(function (_ref2) {\n  var params = _ref2.params;\n  return [{\n    path: 'posts',\n    queryParams: ['orderByChild=createdBy']\n  }];\n}), // Map posts from state to props\nconnect(function (_ref3) {\n  var ordered = _ref3.firebase.ordered;\n  return {\n    posts: ordered.posts\n  };\n}), // Show loading spinner while posts and collabProjects are loading\nspinnerWhileLoading(['posts']), // Add props.router\nwithRouter, // Add handlers as props\nwithHandlers({\n  addPost: function addPost(props) {\n    return function (newInstance) {\n      var firebase = props.firebase,\n          uid = props.uid;\n\n      if (!uid) {\n        return error('로그인이 필요한 작업입니다.');\n      }\n\n      return firebase.push('posts', _objectSpread({}, newInstance, {\n        createdBy: uid,\n        createdAt: firebase.database.ServerValue.TIMESTAMP\n      })).then(function () {\n        success('작성을 성공적으로 마무리했습니다.');\n      }).catch(function (err) {\n        console.error('Error:', err); // eslint-disable-line no-console\n\n        error(err.message || '실패.');\n        return Promise.reject(err);\n      });\n    };\n  }\n}));","map":{"version":3,"sources":["/home/seungmin/face-web/src/routes/Admin/Post/components/PostsPage/PostsPage.enhancer.js"],"names":["compose","connect","withHandlers","withStateHandlers","withRouter","firebaseConnect","withNotifications","spinnerWhileLoading","UserIsAuthenticated","success","error","uid","firebase","auth","params","path","queryParams","ordered","posts","addPost","props","newInstance","push","createdBy","createdAt","database","ServerValue","TIMESTAMP","then","catch","err","console","message","Promise","reject"],"mappings":";AAAA,SAASA,OAAT,QAAwB,OAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,EAAuBC,iBAAvB,QAAgD,WAAhD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,SAASC,mBAAT,QAAoC,kBAApC;AACA,SAASC,mBAAT,QAAoC,cAApC;AAEA,SAASC,OAAT,EAAkBC,KAAlB,QAA+B,qBAA/B;AAEA,eAAeV,OAAO,EACpB;AACAQ,mBAFoB,EAGpB;AACAP,OAAO,CAAC;AAAA,MAAuBU,GAAvB,QAAGC,QAAH,CAAeC,IAAf,CAAuBF,GAAvB;AAAA,SAAsC;AAAEA,IAAAA,GAAG,EAAHA;AAAF,GAAtC;AAAA,CAAD,CAJa,EAKpB;AACAJ,mBAAmB,CAAC,CAAC,KAAD,CAAD,CANC,EAOpB;AACAF,eAAe,CAAC;AAAA,MAAGS,MAAH,SAAGA,MAAH;AAAA,SAAgB,CAC9B;AACEC,IAAAA,IAAI,EAAE,OADR;AAEEC,IAAAA,WAAW,EAAE,CAAC,wBAAD;AAFf,GAD8B,CAAhB;AAAA,CAAD,CARK,EAcpB;AACAf,OAAO,CAAC;AAAA,MAAegB,OAAf,SAAGL,QAAH,CAAeK,OAAf;AAAA,SAAgC;AACtCC,IAAAA,KAAK,EAAED,OAAO,CAACC;AADuB,GAAhC;AAAA,CAAD,CAfa,EAkBpB;AACAX,mBAAmB,CAAC,CAAC,OAAD,CAAD,CAnBC,EAoBpB;AACAH,UArBoB,EAsBpB;AACAF,YAAY,CAAC;AACXiB,EAAAA,OAAO,EAAE,iBAAAC,KAAK;AAAA,WAAI,UAAAC,WAAW,EAAI;AAAA,UACvBT,QADuB,GACLQ,KADK,CACvBR,QADuB;AAAA,UACbD,GADa,GACLS,KADK,CACbT,GADa;;AAE/B,UAAI,CAACA,GAAL,EAAU;AACR,eAAOD,KAAK,CAAC,iBAAD,CAAZ;AACD;;AACD,aAAOE,QAAQ,CACZU,IADI,CACC,OADD,oBAEAD,WAFA;AAGHE,QAAAA,SAAS,EAAEZ,GAHR;AAIHa,QAAAA,SAAS,EAAEZ,QAAQ,CAACa,QAAT,CAAkBC,WAAlB,CAA8BC;AAJtC,UAMJC,IANI,CAMC,YAAM;AACVnB,QAAAA,OAAO,CAAC,oBAAD,CAAP;AACD,OARI,EASJoB,KATI,CASE,UAAAC,GAAG,EAAI;AACZC,QAAAA,OAAO,CAACrB,KAAR,CAAc,QAAd,EAAwBoB,GAAxB,EADY,CACkB;;AAC9BpB,QAAAA,KAAK,CAACoB,GAAG,CAACE,OAAJ,IAAe,KAAhB,CAAL;AACA,eAAOC,OAAO,CAACC,MAAR,CAAeJ,GAAf,CAAP;AACD,OAbI,CAAP;AAcD,KAnBa;AAAA;AADH,CAAD,CAvBQ,CAAtB","sourcesContent":["import { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport { withHandlers, withStateHandlers } from 'recompose'\nimport { withRouter } from 'react-router-dom'\nimport { firebaseConnect } from 'react-redux-firebase'\nimport { withNotifications } from 'modules/notification'\nimport { spinnerWhileLoading } from 'utils/components'\nimport { UserIsAuthenticated } from 'utils/router'\n\nimport { success, error } from 'components/Messages';\n\nexport default compose(\n  // redirect to /login if user is not logged in\n  UserIsAuthenticated,\n  // Map auth uid from state to props\n  connect(({ firebase: { auth: { uid } } }) => ({ uid })),\n  // Wait for uid to exist before going further\n  spinnerWhileLoading(['uid']),\n  // Create listeners based on current users UID\n  firebaseConnect(({ params }) => [\n    {\n      path: 'posts',\n      queryParams: ['orderByChild=createdBy']\n    }\n  ]),\n  // Map posts from state to props\n  connect(({ firebase: { ordered } }) => ({\n    posts: ordered.posts\n  })),\n  // Show loading spinner while posts and collabProjects are loading\n  spinnerWhileLoading(['posts']),\n  // Add props.router\n  withRouter,\n  // Add handlers as props\n  withHandlers({\n    addPost: props => newInstance => {\n      const { firebase, uid } = props\n      if (!uid) {\n        return error('로그인이 필요한 작업입니다.');\n      }\n      return firebase\n        .push('posts', {\n          ...newInstance,\n          createdBy: uid,\n          createdAt: firebase.database.ServerValue.TIMESTAMP\n        })\n        .then(() => {\n          success('작성을 성공적으로 마무리했습니다.');\n        })\n        .catch(err => {\n          console.error('Error:', err); // eslint-disable-line no-console\n          error(err.message || '실패.');\n          return Promise.reject(err);\n        })\n    },\n  }),\n)\n"]},"metadata":{},"sourceType":"module"}